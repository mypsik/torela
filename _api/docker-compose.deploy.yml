services:
  mongo:
    restart: always
    volumes:
      - ./mongodb:/data/db
      - ./configdb:/data/configdb

  torela:
    restart: always
    networks:
      - proxy
      - default
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.myapp.rule=Host(`api.torela.ee`)"
      - "traefik.http.routers.myapp.entrypoints=websecure"
      - "traefik.http.routers.myapp.tls.certresolver=letsencrypt"

networks:
  proxy:
    external: true
